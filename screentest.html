<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>FarmQuest</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', sans-serif;}
body { min-height:100vh; background:linear-gradient(to top,#7ec850,#c9f2a6); display:flex; align-items:center; justify-content:center; }

/* –û–ë–©–ò–ï –≠–ö–†–ê–ù–´ */
.screen { background:rgba(255,255,255,0.95); padding:30px; border-radius:25px; box-shadow:0 15px 40px rgba(0,0,0,0.25); width:95%; max-width:1100px; animation:fadeIn 0.8s ease; }
.hidden { display:none; }

/* –ú–æ–¥–∞–ª–∫–∏ –ø–æ id */
#registerModal, #loginModal, #minigameModal { display:none; }
#registerModal.show, #loginModal.show, #minigameModal.show { display:flex; }

/* ====== –ú–ï–ù–Æ ====== */
.menu { max-width:420px; text-align:center; margin:0 auto; }
.menu h1 { font-size:48px; color:#4b8b3b; }
.menu h1 span { color:#f4a261; }
.menu p { margin:15px 0 15px; color:#555; }

.menu .current-user {
  font-size:14px;
  color:#555;
  margin-bottom:10px;
}
.menu .current-user span {
  font-weight:600;
  color:#4b8b3b;
}

.btn {
  width:100%;
  padding:15px;
  margin:8px 0;
  border:none;
  border-radius:15px;
  font-size:18px;
  cursor:pointer;
  transition:0.3s;
}
.btn-start { background:#4b8b3b; color:#fff; }
.btn-start:hover { background:#3a6e2c; transform:scale(1.05);}
.btn-secondary { background:#f4a261; color:#fff; }
.btn-secondary:hover { background:#e76f51; transform:scale(1.05); }

/* –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ */
.btn-logout {
  background:#bdbdbd;
  color:#333;
  font-size:14px;
  padding:8px 15px;
  width:auto;
  margin-top:4px;
  border-radius:12px;
}
.btn-logout:hover { background:#9e9e9e; }

/* ====== –ë–ê–ó–ê –ü–ï–†–°–û–ù–ê–ñ–ï–ô ====== */
.db h1 { text-align:center; font-size:40px; color:#4b8b3b; }
.db h1 span { color:#f4a261; }
.db p { text-align:center; color:#555; margin-bottom:10px; }
.db .hint { text-align:center; color:#777; font-size:14px; margin-bottom:15px; }

.user-info {
  text-align:center;
  margin-bottom:15px;
  font-size:14px;
  color:#444;
}
.user-info span { font-weight:600; }

.form { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:12px; margin-bottom:20px; }
input { padding:12px; border-radius:12px; border:1px solid#ccc; font-size:15px; }

table { width:100%; border-collapse:collapse; margin-top:15px;}
th,td { padding:10px; border-bottom:1px solid #ddd; text-align:center;}
th { background:#e9f5e3; color:#4b8b3b; }
.btn-add { background:#4b8b3b; color:#fff; }
.btn-add:hover { background:#3a6e2c; transform:scale(1.05);}
.btn-delete { background:#e76f51; color:#fff; padding:8px 12px; border-radius:10px; border:none; cursor:pointer; }
.btn-delete:hover { background:#d65a3c; }
.btn-back { margin-top:20px; background:#bdbdbd; color:#333; }
.btn-back:hover { background:#9e9e9e; }

tr.selected-row { background:#ffe0b2; }

/* ====== –≠–ö–†–ê–ù –ò–ì–†–´: –ö–ê–†–¢–ê + –§–ï–†–ú–´ ====== */
.game-layout {
  display:grid;
  grid-template-columns:1.1fr 1.5fr;
  gap:20px;
}

/* –ö–ê–†–¢–ê */
.map-panel {
  border-radius:20px;
  background:#f2f8ec;
  padding:15px;
}
.map-panel h2 {
  text-align:center;
  font-size:22px;
  color:#4b8b3b;
  margin-bottom:8px;
}
.map-subtitle {
  text-align:center;
  font-size:13px;
  color:#777;
  margin-bottom:10px;
}
.map-grid {
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:12px;
}
.map-tile {
  background:#ffffff;
  border-radius:18px;
  padding:14px 10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transition:0.2s;
}
.map-tile span.icon {
  font-size:28px;
  margin-bottom:6px;
}
.map-tile-title {
  font-size:15px;
  font-weight:600;
  color:#4b8b3b;
}
.map-tile-desc {
  font-size:12px;
  color:#777;
  text-align:center;
  margin-top:3px;
}
.map-tile.active {
  outline:2px solid #4b8b3b;
  transform:translateY(-2px);
}
.map-tile:hover { transform:translateY(-3px); }

/* –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ */
.detail-panel {
  border-radius:20px;
  background:#fdfdfd;
  padding:15px;
}
.detail-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}
.detail-header h2 { font-size:22px; color:#4b8b3b; }
.detail-header small { font-size:12px; color:#777; }
.balance { font-size:14px; color:#4b8b3b; }

/* –≤–∫–ª–∞–¥–∫–∏ */
.detail-tabs {
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
.detail-tab {
  flex:1;
  text-align:center;
  padding:8px;
  border-radius:12px;
  font-size:14px;
  cursor:pointer;
  background:#e9f5e3;
  color:#4b8b3b;
  transition:0.2s;
}
.detail-tab.active {
  background:#4b8b3b;
  color:#fff;
}

.detail-content { min-height:260px; }

/* –§–ï–†–ú–´ */
.farms-wrapper { display:flex; flex-direction:column; gap:16px; }
.single-farm {
  border-radius:16px;
  background:#f7fbf4;
  padding:10px;
}
.single-farm-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:6px;
}
.single-farm-title {
  font-size:14px;
  font-weight:600;
  color:#4b8b3b;
}
.single-farm-tools {
  font-size:11px;
  color:#555;
  text-align:right;
}
.farm-grid {
  display:grid;
  grid-template-columns:repeat(3, 70px);
  grid-auto-rows:70px;
  gap:6px;
  justify-content:center;
  margin-top:4px;
}
.tile {
  border-radius:12px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  user-select:none;
  transition:0.2s;
}
.tile.empty  { background:#c8e6c9; }
.tile.tilled { background:#a5d6a7; }
.tile.planted { background:#81c784; }
.tile.ready  { background:#ffeb3b; }
.tile:hover { transform:scale(1.03); }

.locked-farm {
  text-align:center;
  font-size:13px;
  color:#777;
  padding:20px 10px 10px;
}
.locked-farm button {
  margin-top:8px;
  width:auto;
  padding:8px 14px;
  font-size:14px;
  border-radius:12px;
  border:none;
  cursor:pointer;
  background:#4b8b3b;
  color:#fff;
}

/* –ú–ê–ì–ê–ó–ò–ù –°–ï–ú–Ø–ù */
.seeds-shop {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:10px;
  margin-top:5px;
}
.seed-item {
  border-radius:14px;
  padding:10px;
  background:#f7fbf4;
  border:1px solid #e0f2e9;
  display:flex;
  flex-direction:column;
  gap:4px;
  font-size:13px;
}
.seed-header {
  display:flex;
  align-items:center;
  gap:6px;
}
.seed-header span.emoji { font-size:20px; }
.seed-name { font-weight:600; color:#4b8b3b; }
.seed-desc { color:#777; font-size:12px; }
.seed-footer {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:4px;
}
.seed-price { color:#f4a261; font-weight:600; font-size:12px; }
.seed-owned { font-size:11px; color:#388e3c; }
.seed-owned.none { color:#b0b0b0; }
.seed-buy-btn {
  border-radius:10px;
  border:none;
  padding:6px 10px;
  font-size:12px;
  cursor:pointer;
  background:#4b8b3b;
  color:#fff;
}
.seed-buy-btn:disabled {
  background:#bdbdbd;
  cursor:default;
}

/* –ú–ê–ì–ê–ó–ò–ù –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í / –¢–ï–•–ù–ò–ö–ò / –ü–û–õ–ï–ô */
.shop-list {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(170px,1fr));
  gap:10px;
  margin-top:5px;
}
.shop-item {
  border-radius:14px;
  padding:10px;
  background:#f7fbf4;
  border:1px solid #e0f2e9;
  font-size:13px;
  display:flex;
  flex-direction:column;
  gap:4px;
}
.shop-header {
  display:flex;
  align-items:center;
  gap:6px;
}
.shop-header span.emoji { font-size:20px; }
.shop-name { font-weight:600; color:#4b8b3b; }
.shop-desc { color:#777; font-size:12px; }
.shop-footer {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:4px;
}
.shop-price { color:#f4a261; font-weight:600; font-size:12px; }
.shop-owned { font-size:11px; color:#388e3c; }
.shop-owned.none { color:#b0b0b0; }
.shop-buy-btn {
  border-radius:10px;
  border:none;
  padding:6px 10px;
  font-size:12px;
  cursor:pointer;
  background:#4b8b3b;
  color:#fff;
}
.shop-buy-btn:disabled {
  background:#bdbdbd;
  cursor:default;
}

/* –ú–ò–ù–ò–ò–ì–†–´ ‚Äì –ü–†–ï–í–¨–Æ */
.minigames-placeholder {
  text-align:center;
  color:#777;
  font-size:14px;
  padding-top:20px;
}
.minigame-card {
  display:inline-block;
  margin-top:10px;
  padding:10px 14px;
  border-radius:12px;
  background:#f7fbf4;
  border:1px solid #e0f2e9;
  font-size:13px;
}

/* CANVAS –ú–ò–ù–ò–ò–ì–† */
.minigame-canvas {
  display:block;
  margin:0 auto;
  border-radius:12px;
  border:1px solid #c5e1a5;
  background:#222;
}
.fish-controls, .carrot-controls {
  display:flex;
  justify-content:center;
  gap:8px;
  margin-top:8px;
  flex-wrap:wrap;
}
.fish-controls button, .carrot-controls button {
  padding:6px 10px;
  border-radius:10px;
  border:none;
  background:#4b8b3b;
  color:#fff;
  font-size:12px;
  cursor:pointer;
}
.minigame-info {
  margin-top:8px;
  font-size:12px;
  color:#555;
}

/* –ú–û–î–ê–õ–ö–ò */
.modal {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.45);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:1000;
}
.modal-content {
  background:#fff;
  padding:25px 30px;
  border-radius:20px;
  width:95%;
  max-width:800px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
  animation:fadeIn 0.3s ease;
}
.modal-content h2 {
  text-align:center;
  color:#4b8b3b;
  margin-bottom:10px;
}
.modal-content p {
  text-align:center;
  color:#555; margin-bottom:15px;
}
.modal-content form {
  display:flex;
  flex-direction:column;
  gap:10px;
}
.modal-content input { width:100%; }
.modal-btn-group {
  display:flex;
  gap:10px;
  margin-top:10px;
}
.modal-btn-group .btn { flex:1; }
.error-message {
  color:#e53935;
  font-size:14px;
  text-align:center;
  margin-top:5px;
  min-height:20px;
}

/* –ê–ù–ò–ú–ê–¶–ò–Ø */
@keyframes fadeIn { from { opacity:0; transform:translateY(15px);} to { opacity:1; transform:translateY(0);} }
</style>
</head>

<body>

<!-- ====== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ====== -->
<div class="screen menu" id="menuScreen">
  <h1>Farm<span>Quest</span></h1>
  <p>–†–∞–∑–≤–∏–≤–∞–π —Ñ–µ—Ä–º—É –∏ —É–ø—Ä–∞–≤–ª—è–π –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏</p>

  <div class="current-user">
    –ê–∫–∫–∞—É–Ω—Ç: <span id="currentUserLabel">–ù–µ –≤–æ—à–ª–∏</span>
  </div>

  <button class="btn btn-start" onclick="startGame()">üå± –í–æ–π—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç—É</button>
  <button class="btn btn-secondary" onclick="showScreen('dbScreen')">üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏</button>
  <button class="btn btn-secondary" onclick="loginAsGuest()">üôã –í–æ–π—Ç–∏ –∫–∞–∫ –≥–æ—Å—Ç—å</button>
  <button class="btn btn-secondary" onclick="showLoginModal()">üîë –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</button>
  <button class="btn btn-secondary" onclick="showRegisterModal()">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>

  <button class="btn-logout" onclick="logout()" id="logoutBtn" style="display:none;">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
</div>
</body>
</html>
